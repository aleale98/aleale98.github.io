<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Quiz Indovinelli per Simone</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
  <style>
    body { background: linear-gradient(135deg, #1e3a8a, #9333ea); min-height: 100vh; }
  </style>
</head>
<body class="flex items-center justify-center p-4">
  <div class="bg-white rounded-2xl shadow-2xl p-6 max-w-lg w-full text-center">
    <h1 class="text-3xl font-bold mb-4 text-purple-700">ðŸŽ‰ Quiz di Indovinelli (12 domande)</h1>
    <p id="riddle" class="text-lg mb-4"></p>
    <input id="answer" type="text" placeholder="Scrivi la risposta..." class="border rounded-lg p-2 w-full mb-4">
    <button onclick="checkAnswer()" class="bg-purple-600 hover:bg-purple-700 text-white rounded-lg px-4 py-2">Verifica</button>
    <p id="feedback" class="mt-4 text-lg font-semibold"></p>
    <p id="progress" class="mt-2 text-sm text-gray-600"></p>
  </div>

  <audio id="correctSound" src="https://actions.google.com/sounds/v1/cartoon/clang_and_wobble.ogg"></audio>
  <audio id="wrongSound" src="https://actions.google.com/sounds/v1/cartoon/wood_plank_flicks.ogg"></audio>

  <script>
    const riddles = [
      { q: "Non ho gambe ma corro, non ho bocca ma parlo: sono spesso cartaceo o elettronico e dico dove andare. Cosa sono?", a: ["mappa","una mappa","cartina"] },
      { q: "PiÃ¹ mi togli, piÃ¹ divento grande. Cosa sono?", a: ["buco","un buco","foro"] },
      { q: "Sono tuo ma lo usano gli altri piÃ¹ di te. Cosa sono?", a: ["nome","il tuo nome"] },
      { q: "Mi trovi una volta in un minuto, due volte in un momento, ma mai in mille anni. Cosa sono?", a: ["lettera m","m"] },
      { q: "Sono pieno di buchi ma tengo l'acqua. Cosa sono?", a: ["spugna","una spugna"] },
      { q: "PiÃ¹ sono grande piÃ¹ sono piccolo. Cosa sono?", a: ["numero negativo","numeri negativi"] },
      { q: "Se mi nomini scompaio. Cosa sono?", a: ["silenzio"] },
      { q: "Ho cittÃ  ma non case, fiumi ma non acqua, foreste ma non alberi. Cosa sono?", a: ["mappa","una mappa","cartina"] },
      { q: "Non ho vita, ma cresco; non ho polmoni, ma ho bisogno di aria; non ho bocca ma lâ€™acqua mi uccide. Cosa sono?", a: ["fuoco"] },
      { q: "PiÃ¹ mi lavi piÃ¹ divento nero. Cosa sono?", a: ["lavagna"] },
      { q: "PiÃ¹ mi asciugo, piÃ¹ mi bagno. Cosa sono?", a: ["asciugamano","asciugamani"] },
      { q: "PerchÃ© il libro di matematica era triste?", a: ["perchÃ© aveva troppi problemi","perche aveva troppi problemi"] }
    ];

    let current = 0;

    function showRiddle() {
      document.getElementById('riddle').textContent = riddles[current].q;
      document.getElementById('progress').textContent = `Domanda ${current+1} di ${riddles.length}`;
      document.getElementById('answer').value = '';
      document.getElementById('feedback').textContent = '';
    }

    function normalize(str) {
      return str.toLowerCase().normalize("NFD").replace(/\p{Diacritic}/gu, "").trim();
    }

    function checkAnswer() {
      const userAnswer = normalize(document.getElementById('answer').value);
      const correct = riddles[current].a.some(ans => normalize(ans) === userAnswer);
      if (correct) {
        document.getElementById('feedback').textContent = "âœ… Corretto!";
        document.getElementById('feedback').classList.add('text-green-600');
        document.getElementById('correctSound').play();
        current++;
        if (current < riddles.length) {
          setTimeout(showRiddle, 1200);
        } else {
          document.getElementById('riddle').textContent = "Hai finito! Puoi aprire il regalo ðŸŽ";
          document.getElementById('answer').style.display = 'none';
          confetti();
        }
      } else {
        document.getElementById('feedback').textContent = "âŒ Riprova!";
        document.getElementById('feedback').classList.add('text-red-600');
        document.getElementById('wrongSound').play();
      }
    }

    showRiddle();
  </script>
</body>
</html>
